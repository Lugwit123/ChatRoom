

    "启动后端"   2025-02-10 20:52:48----code_context : lprint("启动后端") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:36, -fn: <module>, None


    "Socket.IO服务器初始化完成"   2025-02-10 20:52:48----code_context : lprint("Socket.IO服务器初始化完成") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\internal\server.py:42, -fn: init_server, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:60, ->code_context:->sio = SocketServer.init_server()->fn:<module>


    "WebSocket门面初始化完成"   2025-02-10 20:52:48----code_context : lprint("WebSocket门面初始化完成") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:60, -fn: init_server, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:62, ->code_context:->websocket_facade.init_server(sio)->fn:<module>


    "数据库连接初始化成功,会话为<sqlalchemy.orm.session.AsyncSession object at 0x000001B7252E2C90>"   2025-02-10 20:52:48----code_context : self.lprint(f"数据库连接初始化成功,会话为{self._shared_session}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\db\facade\database_facade.py:105, -fn: init_sync, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:79, ->code_context:->database_facade.init_sync(database_url)->fn:<module>


    "注册消息处理器事件"   2025-02-10 20:52:49----code_context : self.lprint("注册消息处理器事件") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\facade\message_facade.py:85, -fn: register_handlers, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:91, ->code_context:->await message_facade.register_handlers()->fn:register_message_handlers


    "消息处理器事件注册完成"   2025-02-10 20:52:49----code_context : self.lprint("消息处理器事件注册完成") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\facade\message_facade.py:89, -fn: register_handlers, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:91, ->code_context:->await message_facade.register_handlers()->fn:register_message_handlers


    "后端服务启动..."   2025-02-10 20:52:49----code_context : lprint("后端服务启动...") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:152, -fn: startup_event, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\starlette\routing.py:654, ->code_context:->await handler()->fn:startup


    "已重置所有设备的在线状态为离线"   2025-02-10 20:52:49----code_context : self.lprint("已重置所有设备的在线状态为离线") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:46, -fn: init_all_devices_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:155, ->code_context:->await device_facade.init_all_devices_status()->fn:startup_event


    "后端服务启动完成"   2025-02-10 20:52:49----code_context : lprint("后端服务启动完成") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\main.py:157, -fn: startup_event, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\starlette\routing.py:654, ->code_context:->await handler()->fn:startup


    "收到连接请求: sid=abhDc87iFPjA_SoiAAAB"   2025-02-10 20:52:49----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODI1Mn0.7GdNkYfq9HuEP41ukU4VYee5zJmPj7ldUSfmWg1zZFQ"   2025-02-10 20:52:49----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:52:49----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=abhDc87iFPjA_SoiAAAB, user_id=4"   2025-02-10 20:52:49----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=abhDc87iFPjA_SoiAAAB, user_id=4, device_id=48e936d9-e095-4bb9-beae-7e199b55992f"   2025-02-10 20:52:49----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:52:49----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:52:49----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:52:49----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:52:49----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:52:49----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始断开连接: sid=abhDc87iFPjA_SoiAAAB, user_id=4, device_id=48e936d9-e095-4bb9-beae-7e199b55992f"   2025-02-10 20:53:02----code_context : lprint(f"开始断开连接: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:247, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "连接断开成功: sid=abhDc87iFPjA_SoiAAAB, user_id=4, device_id=48e936d9-e095-4bb9-beae-7e199b55992f"   2025-02-10 20:53:02----code_context : lprint(f"连接断开成功: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:259, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始验证用户: fengqingqing"   2025-02-10 20:53:07----code_context : lprint(f"开始验证用户: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:149, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "找到用户: fengqingqing"   2025-02-10 20:53:07----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:150, ->code_context:->user = await self._auth_repository.get_user_by_username(form_data.username)->fn:login


    "开始验证密码"   2025-02-10 20:53:07----code_context : self.lprint(f"开始验证密码") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:322, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证结果: True"   2025-02-10 20:53:08----code_context : self.lprint(f"密码验证结果: {result}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:324, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证成功,用户名: fengqingqing"   2025-02-10 20:53:08----code_context : lprint(f"密码验证成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:159, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "客户端IP: 127.0.0.1"   2025-02-10 20:53:08----code_context : lprint(f"客户端IP: {client_ip}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:163, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "开始更新设备信息,设备ID: 40851a02b1150e3457faacb1bda67f67"   2025-02-10 20:53:08----code_context : lprint(f"开始更新设备信息,设备ID: {device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:168, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "[设备状态] 成功更新设备 40851a02b1150e3457faacb1bda67f67 状态为 在线"   2025-02-10 20:53:08----code_context : self.lprint(f"[设备状态] 成功更新设备 {device_id} 状态为 {'在线' if is_online else '离线'}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:179, -fn: update_device_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:171, ->code_context:->await self.device_facade.update_device_status(->fn:login


    "创建访问令牌成功,用户名: fengqingqing"   2025-02-10 20:53:08----code_context : lprint(f"创建访问令牌成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:184, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "收到连接请求: sid=qWSAoB8tTbNXkYCeAAAD"   2025-02-10 20:53:08----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODM4OH0.zh3m4XBQ7O_N5WMt-BBIUu1vLdndQskA3OdBegMzxT4"   2025-02-10 20:53:08----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:53:08----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=qWSAoB8tTbNXkYCeAAAD, user_id=4"   2025-02-10 20:53:08----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=qWSAoB8tTbNXkYCeAAAD, user_id=4, device_id=ac7ff0b4-0326-4d1b-a5b1-690115fd0ebd"   2025-02-10 20:53:08----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:53:08----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:53:08----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:53:08----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:53:08----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:53:08----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始断开连接: sid=qWSAoB8tTbNXkYCeAAAD, user_id=4, device_id=ac7ff0b4-0326-4d1b-a5b1-690115fd0ebd"   2025-02-10 20:54:19----code_context : lprint(f"开始断开连接: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:247, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "连接断开成功: sid=qWSAoB8tTbNXkYCeAAAD, user_id=4, device_id=ac7ff0b4-0326-4d1b-a5b1-690115fd0ebd"   2025-02-10 20:54:19----code_context : lprint(f"连接断开成功: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:259, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始验证用户: fengqingqing"   2025-02-10 20:54:24----code_context : lprint(f"开始验证用户: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:149, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "找到用户: fengqingqing"   2025-02-10 20:54:24----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:150, ->code_context:->user = await self._auth_repository.get_user_by_username(form_data.username)->fn:login


    "开始验证密码"   2025-02-10 20:54:24----code_context : self.lprint(f"开始验证密码") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:322, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证结果: True"   2025-02-10 20:54:25----code_context : self.lprint(f"密码验证结果: {result}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:324, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证成功,用户名: fengqingqing"   2025-02-10 20:54:25----code_context : lprint(f"密码验证成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:159, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "客户端IP: 127.0.0.1"   2025-02-10 20:54:25----code_context : lprint(f"客户端IP: {client_ip}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:163, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "开始更新设备信息,设备ID: 40851a02b1150e3457faacb1bda67f67"   2025-02-10 20:54:25----code_context : lprint(f"开始更新设备信息,设备ID: {device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:168, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "[设备状态] 成功更新设备 40851a02b1150e3457faacb1bda67f67 状态为 在线"   2025-02-10 20:54:25----code_context : self.lprint(f"[设备状态] 成功更新设备 {device_id} 状态为 {'在线' if is_online else '离线'}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:179, -fn: update_device_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:171, ->code_context:->await self.device_facade.update_device_status(->fn:login


    "创建访问令牌成功,用户名: fengqingqing"   2025-02-10 20:54:25----code_context : lprint(f"创建访问令牌成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:184, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "收到连接请求: sid=HceFkEG9iR2wrC0OAAAF"   2025-02-10 20:54:25----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODQ2NX0.d0WpZzajRjW5g4twxeO7c8crCuPUvPZOmIb39Mfx60w"   2025-02-10 20:54:25----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:54:25----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=HceFkEG9iR2wrC0OAAAF, user_id=4"   2025-02-10 20:54:25----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=HceFkEG9iR2wrC0OAAAF, user_id=4, device_id=b1d6a179-0536-4664-a32e-1e27faf441a5"   2025-02-10 20:54:25----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:54:25----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:54:25----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:54:25----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:54:25----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:54:25----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始断开连接: sid=HceFkEG9iR2wrC0OAAAF, user_id=4, device_id=b1d6a179-0536-4664-a32e-1e27faf441a5"   2025-02-10 20:55:38----code_context : lprint(f"开始断开连接: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:247, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "连接断开成功: sid=HceFkEG9iR2wrC0OAAAF, user_id=4, device_id=b1d6a179-0536-4664-a32e-1e27faf441a5"   2025-02-10 20:55:38----code_context : lprint(f"连接断开成功: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:259, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始验证用户: fengqingqing"   2025-02-10 20:55:43----code_context : lprint(f"开始验证用户: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:149, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "找到用户: fengqingqing"   2025-02-10 20:55:43----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:150, ->code_context:->user = await self._auth_repository.get_user_by_username(form_data.username)->fn:login


    "开始验证密码"   2025-02-10 20:55:43----code_context : self.lprint(f"开始验证密码") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:322, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证结果: True"   2025-02-10 20:55:43----code_context : self.lprint(f"密码验证结果: {result}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:324, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证成功,用户名: fengqingqing"   2025-02-10 20:55:43----code_context : lprint(f"密码验证成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:159, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "客户端IP: 127.0.0.1"   2025-02-10 20:55:43----code_context : lprint(f"客户端IP: {client_ip}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:163, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "开始更新设备信息,设备ID: 40851a02b1150e3457faacb1bda67f67"   2025-02-10 20:55:43----code_context : lprint(f"开始更新设备信息,设备ID: {device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:168, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "[设备状态] 成功更新设备 40851a02b1150e3457faacb1bda67f67 状态为 在线"   2025-02-10 20:55:43----code_context : self.lprint(f"[设备状态] 成功更新设备 {device_id} 状态为 {'在线' if is_online else '离线'}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:179, -fn: update_device_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:171, ->code_context:->await self.device_facade.update_device_status(->fn:login


    "创建访问令牌成功,用户名: fengqingqing"   2025-02-10 20:55:43----code_context : lprint(f"创建访问令牌成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:184, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "收到连接请求: sid=b5xipSM2eXioHqurAAAH"   2025-02-10 20:55:43----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODU0M30.B_IJ9V5Ymis_Qaacmppl1fsKUefnfC7HxR2bZttDBM8"   2025-02-10 20:55:43----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:55:43----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=b5xipSM2eXioHqurAAAH, user_id=4"   2025-02-10 20:55:43----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=b5xipSM2eXioHqurAAAH, user_id=4, device_id=a3ace7cd-e333-4daf-9017-ee586a49df06"   2025-02-10 20:55:43----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:55:43----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:55:43----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:55:43----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:55:43----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:55:43----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始断开连接: sid=b5xipSM2eXioHqurAAAH, user_id=4, device_id=a3ace7cd-e333-4daf-9017-ee586a49df06"   2025-02-10 20:56:05----code_context : lprint(f"开始断开连接: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:247, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "连接断开成功: sid=b5xipSM2eXioHqurAAAH, user_id=4, device_id=a3ace7cd-e333-4daf-9017-ee586a49df06"   2025-02-10 20:56:05----code_context : lprint(f"连接断开成功: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:259, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始验证用户: fengqingqing"   2025-02-10 20:56:37----code_context : lprint(f"开始验证用户: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:149, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "找到用户: fengqingqing"   2025-02-10 20:56:37----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:150, ->code_context:->user = await self._auth_repository.get_user_by_username(form_data.username)->fn:login


    "开始验证密码"   2025-02-10 20:56:37----code_context : self.lprint(f"开始验证密码") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:322, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证结果: True"   2025-02-10 20:56:37----code_context : self.lprint(f"密码验证结果: {result}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:324, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证成功,用户名: fengqingqing"   2025-02-10 20:56:37----code_context : lprint(f"密码验证成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:159, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "客户端IP: 127.0.0.1"   2025-02-10 20:56:37----code_context : lprint(f"客户端IP: {client_ip}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:163, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "开始更新设备信息,设备ID: 40851a02b1150e3457faacb1bda67f67"   2025-02-10 20:56:37----code_context : lprint(f"开始更新设备信息,设备ID: {device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:168, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "[设备状态] 成功更新设备 40851a02b1150e3457faacb1bda67f67 状态为 在线"   2025-02-10 20:56:37----code_context : self.lprint(f"[设备状态] 成功更新设备 {device_id} 状态为 {'在线' if is_online else '离线'}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:179, -fn: update_device_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:171, ->code_context:->await self.device_facade.update_device_status(->fn:login


    "创建访问令牌成功,用户名: fengqingqing"   2025-02-10 20:56:37----code_context : lprint(f"创建访问令牌成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:184, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "收到连接请求: sid=6yLYr2Wk-JLOg1owAAAJ"   2025-02-10 20:56:37----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODU5N30.6Si-vVXvFYxCzu_I6e9zPJ2LCoUcSoRmYcmPm8FrH2A"   2025-02-10 20:56:37----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:56:37----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=6yLYr2Wk-JLOg1owAAAJ, user_id=4"   2025-02-10 20:56:37----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=6yLYr2Wk-JLOg1owAAAJ, user_id=4, device_id=047f5f81-1442-4120-91c9-e78681ba3ab5"   2025-02-10 20:56:37----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:56:37----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:56:37----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:56:37----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:56:37----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:56:37----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始断开连接: sid=6yLYr2Wk-JLOg1owAAAJ, user_id=4, device_id=047f5f81-1442-4120-91c9-e78681ba3ab5"   2025-02-10 20:57:41----code_context : lprint(f"开始断开连接: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:247, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "连接断开成功: sid=6yLYr2Wk-JLOg1owAAAJ, user_id=4, device_id=047f5f81-1442-4120-91c9-e78681ba3ab5"   2025-02-10 20:57:41----code_context : lprint(f"连接断开成功: sid={sid}, user_id={user_id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:259, -fn: disconnect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "开始验证用户: fengqingqing"   2025-02-10 20:57:46----code_context : lprint(f"开始验证用户: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:149, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "找到用户: fengqingqing"   2025-02-10 20:57:46----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:150, ->code_context:->user = await self._auth_repository.get_user_by_username(form_data.username)->fn:login


    "开始验证密码"   2025-02-10 20:57:46----code_context : self.lprint(f"开始验证密码") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:322, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证结果: True"   2025-02-10 20:57:46----code_context : self.lprint(f"密码验证结果: {result}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\user\facade\user_facade.py:324, -fn: verify_password, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:73, ->code_context:->return self.user_facade.verify_password(plain_password, hashed_password)->fn:verify_password


    "密码验证成功,用户名: fengqingqing"   2025-02-10 20:57:46----code_context : lprint(f"密码验证成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:159, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "客户端IP: 127.0.0.1"   2025-02-10 20:57:46----code_context : lprint(f"客户端IP: {client_ip}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:163, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "开始更新设备信息,设备ID: 40851a02b1150e3457faacb1bda67f67"   2025-02-10 20:57:46----code_context : lprint(f"开始更新设备信息,设备ID: {device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:168, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "[设备状态] 成功更新设备 40851a02b1150e3457faacb1bda67f67 状态为 在线"   2025-02-10 20:57:46----code_context : self.lprint(f"[设备状态] 成功更新设备 {device_id} 状态为 {'在线' if is_online else '离线'}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\device\facade\device_facade.py:179, -fn: update_device_status, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:171, ->code_context:->await self.device_facade.update_device_status(->fn:login


    "创建访问令牌成功,用户名: fengqingqing"   2025-02-10 20:57:46----code_context : lprint(f"创建访问令牌成功,用户名: {form_data.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:184, -fn: login, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\router.py:25, ->code_context:->return await auth_facade.login(request, form_data)->fn:login


    "收到连接请求: sid=hSeH7M4Pgl8LX7r-AAAL"   2025-02-10 20:57:46----code_context : lprint(f"收到连接请求: sid={sid}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:71, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "获取到token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJmZW5ncWluZ3FpbmciLCJkZXZpY2VfaWQiOiI0MDg1MWEwMmIxMTUwZTM0NTdmYWFjYjFiZGE2N2Y2NyIsImV4cCI6MTczOTI3ODY2Nn0.VCxbCBOncAEzphpKw_qpvXbr5LEqXKcbTtD_nnB5Mig"   2025-02-10 20:57:46----code_context : lprint(f"获取到token: {token}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:80, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "找到用户: fengqingqing"   2025-02-10 20:57:46----code_context : self.lprint(f"找到用户: {user.username}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\internal\repository\auth_repository.py:48, -fn: get_user_by_username, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\auth\facade\auth_facade.py:111, ->code_context:->user = await self._auth_repository.get_user_by_username(username)->fn:authenticate_token


    "添加新会话: sid=hSeH7M4Pgl8LX7r-AAAL, user_id=4"   2025-02-10 20:57:46----code_context : lprint(f"添加新会话: sid={sid}, user_id={user_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\dto\websocket_dto.py:80, -fn: add_session, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:116, ->code_context:->self._session_manager.add_session(sid, str(user.id), device_id, ip_address)->fn:connect


    "新连接建立成功: sid=hSeH7M4Pgl8LX7r-AAAL, user_id=4, device_id=e82a9e80-2a59-401b-8a54-6772bdb75c3c"   2025-02-10 20:57:46----code_context : lprint(f"新连接建立成功: sid={sid}, user_id={user.id}, device_id={device_id}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:117, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "用户 4 的聊天伙伴: {1, 2}"   2025-02-10 20:57:46----code_context : self.lprint(f"用户 {user_id} 的聊天伙伴: {partner_ids}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\domain\message\internal\repository\private.py:186, -fn: get_chat_partners, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:129, ->code_context:->chat_partners = await message_facade.private_repo.get_chat_partners(user.id)->fn:connect


    "获取到用户 fengqingqing 的聊天伙伴: [1, 2]"   2025-02-10 20:57:47----code_context : lprint(f"获取到用户 {user.username} 的聊天伙伴: {chat_partners}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:130, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_1_4"   2025-02-10 20:57:47----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "创建私聊房间: private_2_4"   2025-02-10 20:57:47----code_context : lprint(f"创建私聊房间: {room_name}") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:138, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event


    "已发送房间分配消息: rooms=[{'room_name': 'private_1_4'}, {'room_name': 'private_2_4'}],命名空间是"   2025-02-10 20:57:47----code_context : lprint(f"已发送房间分配消息: rooms={rooms},命名空间是") 
File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\trayapp\Lib\ChatRoom\backend\app\core\websocket\facade\websocket_facade.py:144, -fn: connect, 
>>callBy: File: D:\TD_Depot\Software\Lugwit_syncPlug\lugwit_insapp\python_env\Lib\site-packages\socketio\async_server.py:631, ->code_context:->ret = await handler(*args)->fn:_trigger_event
